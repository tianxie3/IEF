<!DOCTYPE>
<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 01</title>
	<style>
		#div1
		{
			border-bottom:2px solid black;
		}
		#button2,#button1
		{
			margin:5px 5px 5px 48px;
		}
		#p1,#span1
		{
			border-left:8px solid #ddd;
			padding-left:4px;
		}
		a
		{
			text-decoration:none;
			font-size:120%;
			margin:0;
			padding:0;
			color:white;
		}
		th
		{
			border:2px solid #ddd;
			padding:12px 65px;
			background-color:rgb(90,90,90);
			color:white;
			font-size:110%;
		}
		td
		{
			padding:12px 65px;
			border:2px solid #ddd;
			font-size:110%;
		}
	</style>
  </head>
<body>
	<div id="div1">
		<p id="p1">请输入你要生成列表的信息: <br/> <span id="span1">已经输入0个同学的数据</span></p>
		名字：<input type="text" id="text1"/><br/>
		语文：<input type="text" id="text2"/><br/>
		数学：<input type="text" id="text3"/><br/>
		英语：<input type="text" id="text4"/><br/>
		<input type="button" id="button1" value="记录"/>
		<input type="button" id="button2" value="生成表格"/>
	</div>
	<div id="div2"></div>
<script>
	var arr = [];
	var _button1 = document.getElementById("button1");
	var _button2 = document.getElementById("button2");
	var _text1 = document.getElementById("text1");
	var _text2 = document.getElementById("text2");
	var _text3 = document.getElementById("text3");
	var _text4 = document.getElementById("text4");
	var _div2 = document.getElementById("div2");
	var _span1 = document.getElementById("span1");
	//记录成绩，统计进数组
	_button1.onclick = function()
	{	//判断是否有留空
		if(!_text1.value || !_text2.value || !_text3.value || !_text4.value)
		{
			alert("还有成绩没输入");
		}
		else//没有就添加进数组
		{
		arr.push([_text1.value,_text2.value,_text3.value,_text4.value]);
		_text1.value = "";
		_text2.value = "";
		_text3.value = "";
		_text4.value = "";
		_span1.innerHTML = "已经输入" + arr.length + "个同学的数据";
		}
	}
	//调用
	_button2.onclick = function()
	{
		_Table();
	}
	function _Table()
	{
		if(_div2.childNodes.length != 0)//判断是否已存在表格，有就删除重载
		{
			_div2.removeChild(_div2.firstChild);
		}
		else if(arr.length == 0)//判断数组有没数据，若没就不制作表格
		{
			return false;
		}
		//创建表格，和表头
		var arr_name = ["名字","语文","数学","英语"];
		var _table = document.createElement("table");
		_table.id = "table1";
		_table.style.borderCollapse = "collapse";
		_div2.appendChild(_table);
		var _tr = document.createElement("tr");
		_table.appendChild(_tr);
		for(var i=0;i<4;i++)
		{
			var _th = document.createElement("th");
			if(i == 0)
			{
				_th.innerHTML = arr_name[i]
			}
			else
			{
			 _th.innerHTML = arr_name[i] + ' <a href="#" id=\"a' + i + '\">▲</a>';			
			}
			_tr.appendChild(_th);
		}

		//添加项目
		var len = arr.length;
		for(var j=0;j<len;j++)
		{
			var _tr2 = document.createElement("tr");
			_table.appendChild(_tr2);
			for(var x=0;x<4;x++)
			{
				var _td = document.createElement("td");
				_td.innerHTML = arr[j][x];
				_tr2.appendChild(_td);
			}
		}
		this.value = "向后插入表格";
		//用必包实现排序后，重载表格
		for(var y=1;y<4;y++)
		{
			document.getElementById("a" + y).onclick = function()
			{
				var o = parseInt(/\d/.exec(this.id));
				arr.sort(function(a,b){return b[o] - a[o]});
				_Table();//调用自身
			}
		}
	}
</script>
</body>
</html>
