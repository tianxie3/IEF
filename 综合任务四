<!DOCTYPE>
<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 01</title>
	<style>
		body{
			text-align: center;
		}
		table {
			border-collapse: collapse;
		}
		td {
			border: 2px solid black;
			width: 39px;
			height: 42px;
		}
		#div1{
			position: relative;
			margin-left: 32%;
		}
		#div2{
			position: absolute;
			width: 41px;
			height: 40px;
			background-color: black;
			top:25px;
			left:24px;
		}
		#div3 {
			background-color: red;
			height:10px;
			width: 41px;
		}
	</style>
  </head>
<body>
	<div id="div1">
	<table>
	<tr>
	<th></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th>
	</tr>
	<tr>
	<th>1</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>2</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>3</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>4</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>5</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>6</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>7</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>8</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>9</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	<tr>
	<th>10</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
	</tr>
	</table>
	<div id="div2"><div id="div3"></div></div>
	</div><br/>
	<input type="text" id="text"/>
	<button id="button">执行</button>
	<p>go：向蓝色边所面向的方向前进一格（一格等同于正方形的边长）<br/>
	left：向左转（逆时针旋转90度）<br/>
	right：向右转（顺时针旋转90度）<br/>
	back：向右转（旋转180度）
	</p>
<script>
	var _text = document.getElementById("text");
	var _button = document.getElementById("button");
	var _div2 = document.getElementById("div2");
	var direction = 0;   //方向上为0，向右为1，向下为2，向左为3。//
	_button.onclick = function(){
		//判断指令 右//
		if(_text.value == "right"){
			switch(direction){
			case 0:
				direction += 1;
				_direction(direction);
				break;
			case 1:
				direction += 1;
				_direction(direction);
				break;
			case 2:
				direction += 1;
				_direction(direction);
				break;
			case 3:
				direction += 1;
				_direction(direction);
				direction = 0;
				break;
			}
		}
		//判断指令 左//
		if(_text.value == "left"){
			switch(direction){
			case 0:
				direction = 3;
				_direction(direction);
				break;
			case 1:
				direction = 4;
				_direction(direction);
				direction = 0;
				break;
			case 2:
				direction = 1;
				_direction(direction);
				break;
			case 3:
				direction = 2;
				_direction(direction);
				break;
			}
		}
		//判断指令 返回//
		if(_text.value == "back"){
			switch(direction){
			case 0:
				direction = 2;
				_direction(direction);
				break;
			case 1:
				direction = 3;
				_direction(direction);
				direction = 0;
				break;
			case 2:
				direction = 4;
				_direction(direction);
				direction = 0;
				break;
			case 3:
				direction = 1;
				_direction(direction);
				break;
			}
		}
		//判断指令 走//
		if(_text.value == "go"){
			var _top = _div2.style;
			var _left = _div2.style;
			switch(direction){
			case 0:
				if(!_top.top){
					_top.top = "25px";
					_left.left = "24px";
				}
				if(_top.top != "25px"){
					_top.top = (parseInt(/\d+/.exec(_top.top))-42) + "px";
				}
				break;
			case 1:
				if(!_top.top){
					_top.top = "25px";
					_left.left = "24px";
				}
				if(_left.left != "411px"){
					_left.left = (parseInt(/\d+/.exec(_left.left))+43) + "px";
				}
				break;
			case 2:
				if(!_top.top){
					_top.top = "25px";
					_left.left = "24px";
				}
				if(_top.top != "403px"){
					_top.top = (parseInt(/\d+/.exec(_top.top))+42) + "px";
				}
				break;
			case 3:
				if(!_top.top){
					_top.top = "25px";
					_left.left = "24px";
				}
				if(_left.left != "24px"){
					_left.left = (parseInt(/\d+/.exec(_left.left))-43) + "px";
				}
				break;
			}
		}
	}
	//判断位置，给出对应的旋转角度//
	function _direction(a){
		if(a == 1){
			_rotate(90);
		}
		else if(a == 2){
			_rotate(180);
		}
		else if(a == 3){
			_rotate(270);
		}
		else if(a == 4){
			_rotate(0);
		}
	}
	//兼容性//
	function _rotate(w){
		_div2.style.transform = "rotate(" + w + "deg)";
		_div2.style.msTransform = "rotate(" + w + "deg)";
		_div2.style.MozTransform = "rotate(" + w + "deg)";
		_div2.style.webkitTransform = "rotate(" + w + "deg)";
		_div2.style.OTransform = "rotate(" + w + "deg)";
	}	

</script>
</body>
</html>
